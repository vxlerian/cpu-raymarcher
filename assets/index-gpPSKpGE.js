(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const ae=()=>{document.body.classList.add("dark-mode"),sessionStorage.setItem("dark-mode","active")},ge=()=>{document.body.classList.remove("dark-mode"),sessionStorage.setItem("dark-mode","inactive")},ye=()=>{let t=sessionStorage.getItem("dark-mode");t==="active"&&ae();const e=document.getElementById("theme-switch");e!==null&&e.addEventListener("click",()=>{t=sessionStorage.getItem("dark-mode"),t!=="active"?ae():ge()})};ye();var q=typeof Float32Array<"u"?Float32Array:Array;function z(){var t=new q(16);return q!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function we(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Se(t,e){var r=e[0],n=e[1],s=e[2],a=e[3],i=e[4],l=e[5],c=e[6],h=e[7],o=e[8],d=e[9],f=e[10],v=e[11],p=e[12],x=e[13],u=e[14],g=e[15],I=r*l-n*i,y=r*c-s*i,b=r*h-a*i,D=n*c-s*l,P=n*h-a*l,L=s*h-a*c,A=o*x-d*p,F=o*u-f*p,k=o*g-v*p,B=d*u-f*x,T=d*g-v*x,j=f*g-v*u,S=I*j-y*T+b*B+D*k-P*F+L*A;return S?(S=1/S,t[0]=(l*j-c*T+h*B)*S,t[1]=(s*T-n*j-a*B)*S,t[2]=(x*L-u*P+g*D)*S,t[3]=(f*P-d*L-v*D)*S,t[4]=(c*k-i*j-h*F)*S,t[5]=(r*j-s*k+a*F)*S,t[6]=(u*b-p*L-g*y)*S,t[7]=(o*L-f*b+v*y)*S,t[8]=(i*T-l*k+h*A)*S,t[9]=(n*k-r*T-a*A)*S,t[10]=(p*P-x*b+g*I)*S,t[11]=(d*b-o*P-v*I)*S,t[12]=(l*F-i*B-c*A)*S,t[13]=(r*B-n*F+s*A)*S,t[14]=(x*y-p*D-u*I)*S,t[15]=(o*D-d*y+f*I)*S,t):null}function Ie(t,e,r){var n=r[0],s=r[1],a=r[2],i,l,c,h,o,d,f,v,p,x,u,g;return e===t?(t[12]=e[0]*n+e[4]*s+e[8]*a+e[12],t[13]=e[1]*n+e[5]*s+e[9]*a+e[13],t[14]=e[2]*n+e[6]*s+e[10]*a+e[14],t[15]=e[3]*n+e[7]*s+e[11]*a+e[15]):(i=e[0],l=e[1],c=e[2],h=e[3],o=e[4],d=e[5],f=e[6],v=e[7],p=e[8],x=e[9],u=e[10],g=e[11],t[0]=i,t[1]=l,t[2]=c,t[3]=h,t[4]=o,t[5]=d,t[6]=f,t[7]=v,t[8]=p,t[9]=x,t[10]=u,t[11]=g,t[12]=i*n+o*s+p*a+e[12],t[13]=l*n+d*s+x*a+e[13],t[14]=c*n+f*s+u*a+e[14],t[15]=h*n+v*s+g*a+e[15]),t}function be(t,e,r){var n=Math.sin(r),s=Math.cos(r),a=e[4],i=e[5],l=e[6],c=e[7],h=e[8],o=e[9],d=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*s+h*n,t[5]=i*s+o*n,t[6]=l*s+d*n,t[7]=c*s+f*n,t[8]=h*s-a*n,t[9]=o*s-i*n,t[10]=d*s-l*n,t[11]=f*s-c*n,t}function Pe(t,e,r){var n=Math.sin(r),s=Math.cos(r),a=e[0],i=e[1],l=e[2],c=e[3],h=e[8],o=e[9],d=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*s-h*n,t[1]=i*s-o*n,t[2]=l*s-d*n,t[3]=c*s-f*n,t[8]=a*n+h*s,t[9]=i*n+o*s,t[10]=l*n+d*s,t[11]=c*n+f*s,t}function Z(t,e,r,n){var s=e[0],a=e[1],i=e[2],l=e[3],c=s+s,h=a+a,o=i+i,d=s*c,f=s*h,v=s*o,p=a*h,x=a*o,u=i*o,g=l*c,I=l*h,y=l*o,b=n[0],D=n[1],P=n[2];return t[0]=(1-(p+u))*b,t[1]=(f+y)*b,t[2]=(v-I)*b,t[3]=0,t[4]=(f-y)*D,t[5]=(1-(d+u))*D,t[6]=(x+g)*D,t[7]=0,t[8]=(v+I)*P,t[9]=(x-g)*P,t[10]=(1-(d+p))*P,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function G(){var t=new q(3);return q!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function _(t){var e=new q(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ee(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function w(t,e,r){var n=new q(3);return n[0]=t,n[1]=e,n[2]=r,n}function De(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Ce(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function U(t,e){var r=e[0],n=e[1],s=e[2],a=r*r+n*n+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function V(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Me(t,e,r){var n=e[0],s=e[1],a=e[2],i=r[3]*n+r[7]*s+r[11]*a+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*s+r[8]*a+r[12])/i,t[1]=(r[1]*n+r[5]*s+r[9]*a+r[13])/i,t[2]=(r[2]*n+r[6]*s+r[10]*a+r[14])/i,t}(function(){var t=G();return function(e,r,n,s,a,i){var l,c;for(r||(r=3),n||(n=0),s?c=Math.min(s*r+n,e.length):c=e.length,l=n;l<c;l+=r)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],a(t,t,i),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}})();class Ee{orbitCentre;cameraDistance;cameraTransform;pitch;yaw;constructor(){this.orbitCentre=z(),this.cameraDistance=3,this.pitch=0,this.yaw=0,this.cameraTransform=z(),this.updateCameraTransform()}rotateCamera(e,r){this.pitch=Math.min(Math.max(this.pitch+e,-Math.PI/2),Math.PI/2),this.yaw+=r,this.updateCameraTransform()}getAngles(){return[this.pitch,this.yaw]}getRotationMatrix(e){return e[0]=this.cameraTransform[0],e[1]=this.cameraTransform[1],e[2]=this.cameraTransform[2],e[3]=0,e[4]=this.cameraTransform[4],e[5]=this.cameraTransform[5],e[6]=this.cameraTransform[6],e[7]=0,e[8]=this.cameraTransform[8],e[9]=this.cameraTransform[9],e[10]=this.cameraTransform[10],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getCameraPosition(e){return e[0]=this.cameraTransform[12],e[1]=this.cameraTransform[13],e[2]=this.cameraTransform[14],e}getCameraMatrix(e){return we(e,this.cameraTransform),e}setAngles(e,r){this.pitch=Math.min(Math.max(e,-Math.PI/2),Math.PI/2),this.yaw=r,this.updateCameraTransform()}getPosition(e){return e[0]=this.cameraTransform[12],e[1]=this.cameraTransform[13],e[2]=this.cameraTransform[14],e}transformDirection(e,r){const n=this.cameraTransform,s=r[0],a=r[1],i=r[2];return e[0]=n[0]*s+n[4]*a+n[8]*i,e[1]=n[1]*s+n[5]*a+n[9]*i,e[2]=n[2]*s+n[6]*a+n[10]*i,e}updateCameraTransform(){const e=z();Pe(e,z(),this.yaw),be(this.orbitCentre,e,this.pitch),Ie(this.cameraTransform,this.orbitCentre,w(0,0,Math.abs(this.cameraDistance)))}}class ne{transform;constructor(e){this.transform=e}getWorldPosition(){const e=z();return Se(e,this.transform),w(e[12],e[13],e[14])}sdf(e){const r=G();return Me(r,e,this.transform),this.localSdf(r)}}class Fe extends ne{radius;constructor(e,r){super(e),this.radius=r}localSdf(e){return ee(e)-this.radius}getLocalBoundingRadius(){return this.radius}}class Ae extends ne{halfSize;constructor(e,r){super(e),this.halfSize=_(r)}localSdf(e){const r=w(Math.abs(e[0])-this.halfSize[0],Math.abs(e[1])-this.halfSize[1],Math.abs(e[2])-this.halfSize[2]),n=w(Math.max(r[0],0),Math.max(r[1],0),Math.max(r[2],0)),s=ee(n),a=Math.min(Math.max(r[0],Math.max(r[1],r[2])),0);return s+a}getLocalBoundingRadius(){return ee(this.halfSize)}}class Te extends ne{majorRadius;minorRadius;constructor(e,r,n){super(e),this.majorRadius=r,this.minorRadius=n}localSdf(e){const r=e[0],n=e[1],s=e[2],a=Math.sqrt(r*r+s*s)-this.majorRadius,i=n;return Math.sqrt(a*a+i*i)-this.minorRadius}getLocalBoundingRadius(){return this.majorRadius+this.minorRadius}}class m{static createSphere(e,r,n,s){const a=z();return Z(a,[0,0,0,1],[e,r,n],[1,1,1]),new Fe(a,s)}static createBox(e,r,n,s){const a=z();return Z(a,[0,0,0,1],[e,r,n],[1,1,1]),new Ae(a,s)}static createTorus(e,r,n,s){const a=z();return Z(a,[0,0,0,1],[e,r,n],[1,1,1]),new Te(a,s,s/4)}static presets=[{name:"Sphere",objects:[m.createSphere(0,0,0,1.5)]},{name:"Grid of Spheres",objects:[m.createSphere(-1,-1,0,.3),m.createSphere(0,-1,0,.3),m.createSphere(1,-1,0,.3),m.createSphere(-1,0,0,.3),m.createSphere(0,0,0,.3),m.createSphere(1,0,0,.3),m.createSphere(-1,1,0,.3),m.createSphere(0,1,0,.3),m.createSphere(1,1,0,.3)]},{name:"Atom",objects:[m.createSphere(0,0,0,.5),m.createSphere(1.2,0,0,.3),m.createSphere(-1.2,0,0,.3),m.createSphere(0,1.2,0,.3),m.createSphere(0,-1.2,0,.3),m.createSphere(0,0,1.2,.3),m.createSphere(0,0,-1.2,.3)]},{name:"Random Spheres",objects:[m.createSphere(.8,-.3,.2,.4),m.createSphere(-.5,.9,-.1,.5),m.createSphere(.2,.1,.8,.3),m.createSphere(-.9,-.4,-.6,.6),m.createSphere(.4,-.8,.5,.35),m.createSphere(-.2,.6,-.9,.4),m.createSphere(.7,.3,-.4,.25)]},{name:"Cube",objects:[m.createBox(0,0,0,w(1,1,1))]},{name:"Sphere and Cube",objects:[m.createSphere(-.7,0,0,.5),m.createBox(1,0,0,w(.5,.5,.5))]},{name:"Pyramid of Boxes",objects:[m.createBox(0,-.5,0,w(.9,.25,.9)),m.createBox(0,0,0,w(.6,.25,.6)),m.createBox(0,.5,0,w(.3,.25,.3))]},{name:"Torus",objects:[m.createTorus(0,0,0,1.3)]},{name:"Dense Sphere Grid",objects:(()=>{const e=[];for(let a=0;a<5;a++)for(let i=0;i<5;i++)for(let l=0;l<5;l++)e.push(m.createSphere(a*.6-1.2,i*.6-1.2,l*.6-1.2,.15));return e})()}];static getPreset(e){return this.presets[Math.max(0,Math.min(e,this.presets.length-1))]}static getPresetCount(){return this.presets.length}static populateSceneDropdown(e,r=0){e.innerHTML="";for(let n=0;n<this.presets.length;n++){const s=this.getPreset(n),a=document.createElement("option");a.value=n.toString(),a.textContent=s.name,a.selected=n===r,e.appendChild(a)}}}class ${min;max;constructor(e,r){this.min=_(e),this.max=_(r)}contains(e){return e[0]>=this.min[0]&&e[0]<=this.max[0]&&e[1]>=this.min[1]&&e[1]<=this.max[1]&&e[2]>=this.min[2]&&e[2]<=this.max[2]}intersects(e){return this.min[0]<=e.max[0]&&this.max[0]>=e.min[0]&&this.min[1]<=e.max[1]&&this.max[1]>=e.min[1]&&this.min[2]<=e.max[2]&&this.max[2]>=e.min[2]}center(){return w((this.min[0]+this.max[0])/2,(this.min[1]+this.max[1])/2,(this.min[2]+this.max[2])/2)}static fromPrimitive(e){const r=e.getWorldPosition(),s=e.getLocalBoundingRadius()*1.1;return new $(w(r[0]-s,r[1]-s,r[2]-s),w(r[0]+s,r[1]+s,r[2]+s))}}class ie{bounds;primitives;children;constructor(e,r){this.bounds=e,this.primitives=r,this.children=null}isLeaf(){return this.children===null}}class Le{root;maxDepth;maxPrimitivesPerNode;constructor(e,r,n=6,s=4){this.maxDepth=n,this.maxPrimitivesPerNode=s,this.root=this.buildNode(e,r,0)}buildNode(e,r,n){const s=new ie(r,[]);if(n>=this.maxDepth||e.length<=this.maxPrimitivesPerNode)return s.primitives=e,s;const a=r.center(),i=[];for(let c=0;c<2;c++)for(let h=0;h<2;h++)for(let o=0;o<2;o++){const d=o===0?r.min[0]:a[0],f=o===0?a[0]:r.max[0],v=h===0?r.min[1]:a[1],p=h===0?a[1]:r.max[1],x=c===0?r.min[2]:a[2],u=c===0?a[2]:r.max[2];i.push(new $(w(d,v,x),w(f,p,u)))}const l=Array.from({length:8},()=>[]);for(const c of e){const h=$.fromPrimitive(c);for(let o=0;o<8;o++)i[o].intersects(h)&&l[o].push(c)}s.children=[];for(let c=0;c<8;c++)l[c].length>0?s.children.push(this.buildNode(l[c],i[c],n+1)):s.children.push(new ie(i[c],[]));return s}getPrimitivesAt(e){const r=new Set;return this.queryNode(this.root,e,r),Array.from(r)}queryNode(e,r,n){if(e.bounds.contains(r)){if(e.isLeaf()){for(const s of e.primitives)n.add(s);return}if(e.children)for(const s of e.children)this.queryNode(s,r,n)}}}class ze{objectSDFs;camera;octree=null;accelerationStructure="None";currentPresetIndex=0;constructor(e="None"){this.camera=new Ee,this.objectSDFs=new Array,this.accelerationStructure=e,this.loadPreset(0)}loadPreset(e){this.currentPresetIndex=Math.max(0,Math.min(e,m.getPresetCount()-1));const r=m.getPreset(this.currentPresetIndex);this.objectSDFs=[...r.objects],this.accelerationStructure=="Octree"?this.buildOctree():this.octree=null}buildOctree(){const e=this.calculateSceneBounds();this.octree=new Le(this.objectSDFs,e)}calculateSceneBounds(){const e=w(-10,-10,-10),r=w(10,10,10);return new $(e,r)}nextPreset(){this.loadPreset(Math.min(this.currentPresetIndex+1,m.getPresetCount()))}previousPreset(){this.loadPreset(Math.max(this.currentPresetIndex-1,0))}getCurrentPresetInfo(){const e=m.getPreset(this.currentPresetIndex);return{index:this.currentPresetIndex,name:e.name,total:m.getPresetCount()}}getDistance(e,r){let s=.5;if(this.accelerationStructure==="Octree"&&this.octree){const a=this.octree.getPrimitivesAt(e);for(const i of a)r&&r.count++,s=Math.min(i.sdf(e),s)}else for(const a of this.objectSDFs)r&&r.count++,s=Math.min(a.sdf(e),s);return s}}class H{}class Re extends H{shade(e,r,n,s,a,i,l){const c=w(1,-1,1.5);U(c,c);const h=G(),o=G(),d=w(0,0,1),f=.1,v=.5,p=32;for(let x=0;x<l;x++)for(let u=0;u<i;u++){const g=x*i+u,I=g*3,y=g*4,b=r[g];if(b>=255){e[y+0]=10,e[y+1]=10,e[y+2]=20,e[y+3]=255;continue}h[0]=n[I]/127.5-1,h[1]=n[I+1]/127.5-1,h[2]=n[I+2]/127.5-1,U(h,h);const D=Math.max(V(h,c),0);Ce(o,h,2*V(h,c)),De(o,o,c),U(o,o);const P=v*Math.pow(Math.max(V(d,o),0),p),L=Math.min(f+D+P,1),A=1-b/255,F=255*L*A;e[y+0]=F,e[y+1]=F,e[y+2]=F,e[y+3]=255}return e}}class te extends H{shade(e,r,n,s,a,i,l){for(let c=0;c<l;c++)for(let h=0;h<i;h++){const o=c*i+h,d=o*3,f=o*4;e[f]=n[d],e[f+1]=n[d+1],e[f+2]=n[d+2],e[f+3]=255}return e}}class ke extends H{shade(e,r,n,s,a,i,l){const h=w(1,-1,1.5);U(h,h);for(let o=0;o<l;o++)for(let d=0;d<i;d++){const f=o*i+d,v=f*4,p=s[f]*5%256;e[v+0]=Math.min(2*p,255),e[v+1]=Math.min(-2*p+512,255),e[v+2]=0,e[v+3]=255}return e}}class Be extends H{shade(e,r,n,s,a,i,l){const h=w(1,-1,1.5);U(h,h);for(let o=0;o<l;o++)for(let d=0;d<i;d++){const f=o*i+d,v=f*4,p=a[f]*5%256;e[v+0]=Math.min(2*p,255),e[v+1]=Math.min(-2*p+512,255),e[v+2]=0,e[v+3]=255}return e}}const W=document.getElementById("shader-canvas"),je=W.getContext("2d"),M=W.width,C=W.height,Ne=document.getElementById("fps"),Oe=document.getElementById("average-sdf-calls"),qe=document.getElementById("max-sdf-calls"),Ue=document.getElementById("min-sdf-calls"),$e=document.getElementById("average-iterations");let N=new te;document.getElementById("shading-models").addEventListener("change",t=>{switch(t.target.value){case"phong":N=new Re;break;case"normal":N=new te;break;case"sdf-heatmap":N=new ke;break;case"iteration-heatmap":N=new Be;break;default:N=new te}});let Y="sphere-tracer";document.getElementById("algorithm").addEventListener("change",t=>{switch(t.target.value){case"sphere-tracer":Y="sphere-tracer";break;case"fixed-step":Y="fixed-step";break;default:Y="sphere-tracer"}});let re="None";document.getElementById("octree-toggle").addEventListener("change",t=>{t.target.checked?re="Octree":re="None"});let ce=performance.now();const X=new ze,me=document.getElementById("scene-select");me.addEventListener("change",t=>{const e=parseInt(t.target.value);X.loadPreset(e)});const We=X.getCurrentPresetInfo();m.populateSceneDropdown(me,We.index);const de=Math.max(1,Math.min(4,(navigator.hardwareConcurrency||4)-1)),Xe=Array.from({length:de},()=>new Worker(new URL("/raymarcher-test/assets/raymarchWorker-uR9D_g0-.js",import.meta.url),{type:"module"})),oe=new Uint8ClampedArray(M*C),le=new Uint8ClampedArray(M*C*3),J=new Uint16Array(M*C),Q=new Uint16Array(M*C),he=new Uint8ClampedArray(M*C*4);let O=1;function se(){W.style.width=`${M*O}px`,W.style.height=`${C*O}px`}se();async function fe(t){const e=Math.ceil(C/de),[r,n]=X.camera.getAngles(),s=Xe.map((p,x)=>{const u=Math.min(x*e,C),g=Math.min((x+1)*e,C);return u>=g?Promise.resolve(null):new Promise(I=>{const y=D=>{p.removeEventListener("message",y);const{yStart:P,yEnd:L,depth:A,normal:F,sdfEval:k,iters:B}=D.data,T=P*M;oe.set(A,T),J.set(k,T),Q.set(B,T);const j=P*M*3;le.set(F,j),I(null)};p.addEventListener("message",y);const b=X.getCurrentPresetInfo();p.postMessage({width:M,height:C,time:t,yStart:u,yEnd:g,camera:{pitch:r,yaw:n},algorithm:Y,scenePresetIndex:b.index,accelerationStructure:re})})});await Promise.all(s),N.shade(he,oe,le,J,Q,M,C);const a=new ImageData(he,M,C);je.putImageData(a,0,0);const i=performance.now();Ne.textContent=`Frame length: ${(i-ce).toPrecision(4)}`,ce=i;const l=M*C;let c=0,h=0,o=Number.MAX_SAFE_INTEGER,d=0;for(let p=0;p<l;p++){const x=J[p];c+=x,d+=Q[p],x>h&&(h=x),x<o&&(o=x)}const f=c/l,v=d/l;Oe.textContent=`Average SDF calls: ${f.toFixed(2)}`,qe.textContent=`Max SDF calls: ${h}`,Ue.textContent=`Min SDF calls: ${o}`,$e.textContent=`Average iterations: ${v.toFixed(2)}`,requestAnimationFrame(fe)}window.addEventListener("keydown",t=>{switch(t.key){case"ArrowUp":R(0,.1);break;case"ArrowDown":R(0,-.1);break;case"ArrowLeft":R(.1,0);break;case"ArrowRight":R(-.1,0);break;case"-":case"_":O=Math.max(.25,O-.25),se();break;case"+":case"=":O=Math.min(8,O+.25),se();break}});function R(t,e){X.camera.rotateCamera(-e,t)}const K=.1;let E={up:!1,down:!1,right:!1,left:!1};const pe=document.getElementById("up");pe?.addEventListener("pointerdown",()=>{E.up=!0,setInterval(()=>{E.up&&R(0,K)},100)});pe?.addEventListener("pointerout",()=>{E.up=!1});const ve=document.getElementById("down");ve?.addEventListener("pointerdown",()=>{E.down=!0,setInterval(()=>{E.down&&R(0,-K)},100)});ve?.addEventListener("pointerout",()=>{E.down=!1});const xe=document.getElementById("left");xe?.addEventListener("pointerdown",()=>{E.left=!0,setInterval(()=>{E.left&&R(K,0)},100)});xe?.addEventListener("pointerout",()=>{E.left=!1});const ue=document.getElementById("right");ue?.addEventListener("pointerdown",()=>{E.right=!0,setInterval(()=>{E.right&&R(-K,0)},100)});ue?.addEventListener("pointerout",()=>{E.right=!1});requestAnimationFrame(fe);
