<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <title>CPU Shader Tester</title>
      <link rel="stylesheet" href="style.css">
      <script type="module" src="src/website_elements/theme_switch.ts" defer></script>
      <script type="module" src="src/website_elements/environment_switch.ts" defer></script>
   </head>
   <body>
      <div class="top-bar">
         <h1>Raymarcher Visualiser</h1>
      </div>
      <div class="page-wrapper">
         <div id="page-selection">
            <button id="playground-btn" data-target="playground-view">Playground</button>
            <button id="analytics-btn" data-target="analytics-view">Analytics</button>
         </div>
         <div id="views">
            <div id="playground-view" class="view active-view">
               <div id="app">
                  <div id="editor-container">
                     <div>
                        <label for="algorithm">Select algorithm: </label>
                        <select name="selectedAlgo" id="algorithm">
                           <option value="sphere-tracing">Sphere Tracing</option>
                           <option value="fixed-step">Fixed Step</option>
                        </select>
                     </div>
                     <div>
                        <label for="scene-select">Select scene: </label>
                        <select name="selectedScene" id="scene-select">
                           <!-- Will be filled automatically in main.ts -->
                        </select>
                     </div>
                     <div>
                        <label for="shading-model">Shading model: </label>
                        <select name="selectedModel" id="shading-models">
                           <option value="normal">Normal</option>
                           <option value="phong">Phong</option>
                           <option value="sdf-heatmap">SDF Heatmap</option>
                           <option value="iteration-heatmap">Iteration Heatmap</option>
                        </select>
                     </div>
                  </div>
                  <div id="canvas-container">
                     <canvas id="shader-canvas" width="256" height="256"></canvas>
                     <!-- resolution is currently at a fixed 512 x 512 but we can
                        eventually let the user select a resolution.
                        -->
                  </div>
                  <div id="right-side-panel">
                     <div id="diagnostics">
                        <p style="margin-top: 0px;" id="fps">Frame length: 0</p>
                        <p id="average-sdf-calls">Average SDF calls: 0</p>
                        <p id="max-sdf-calls">Max SDF calls: 0</p>
                        <p id="min-sdf-calls">Min SDF calls: 0</p>
                        <p id="average-iterations">Average iterations: 0</p>
                        <div style="margin-top: 10px; font-size: 0.9em;">
                           <strong>Controls:</strong><br>
                           Arrow keys: Camera<br>
                           -/+: Scale display<br>
                        </div>
                     </div>
                     <div id="theme">
                        <button id="theme-switch">
                           <!--Light and dark mode icons (in that order)-->
                           <svg 
                              xmlns="http://www.w3.org/2000/svg" 
                              height="24px" 
                              viewBox="0 -960 960 960" 
                              width="24px" fill="#e3e3e3"
                              >
                              <path 
                                 d="
                                 M480-280q-83 0-141.5-58.5T280-480q0-83 
                                 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5
                                 141.5T480-280ZM200-440H40v-80h160v80Zm720 
                                 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 
                                 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 
                                 100-52 56Zm492 496-97-101 53-55 101 97-57 
                                 59Zm-98-550 97-101 59 57-100 
                                 96-56-52ZM154-212l101-97 55 53-97 101-59-57Z"
                                 />
                           </svg>
                           <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="24px"
                              height="24px"
                              viewBox="0 -960 960 960"
                              fill="#e3e3e3"
                              >
                              <path
                                 d="
                                 M480-120 q-150 0-255-105T120-480 
                                 q0-150 105-255t255-105 q14 0 27.5 1t26.5 3
                                 q-41 29-65.5 75.5T444-660 q0 90 63 153t153 63
                                 q55 0 101-24.5t75-65.5 q2 13 3 26.5t1 27.5
                                 q0 150-105 255T480-120Z
                                 "
                                 />
                           </svg>
                        </button>
                     </div>
                  </div>
               </div>
            </div>
            <div id="analytics-view" class="view">
               <!-- analytics flexbox (similar but not rlly) -->
            </div>
         </div>
      </div>
      <script type="module" src="/src/main.ts"></script>
   </body>
</html>